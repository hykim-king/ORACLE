<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.pcwk.ehr">


 <select id="get" parameterType="LogInVO" resultMap="userMap">
			SELECT
						id,
						nickname
			FROM
						account_tb
			WHERE id = #{userId}                           
 
 </select>


     <select id="passCheck" parameterType="LogInVO" resultType="int">
    SELECT count(*) cnt
    FROM
        account_tb
        WHERE id = #{userId}
        AND   password = #{passwd}
    </select>

    <select id="idCheck" parameterType="LogInVO" resultType="int">
    SELECT count(*) cnt
    FROM
        account_tb
    WHERE id  = #{userId}
    </select>

		
		
 
     <select id="resultSelect" parameterType="Result_Url_VO" resultType="Result_Url_VO">
        SELECT a.nickname,
               u.result_date,
               u.url,
               m.mbti_type
        FROM account_tb a
                 JOIN url_tb u ON a.id = u.id
                 JOIN mbti_tb m ON a.mbti = m.mbti
        WHERE a.id = #{Id}
    </select>
    
<!--    <insert id="urlInsert" parameterType="shareVO" >
        INSERT INTO url_tb (
        seq,
        result_date,
        url,
        id
        ) VALUES (
        url_seq.nextval,
        sysdate,
        #{url},
        #{Id}
        );

    </insert>-->

    <select id="urlSelect" parameterType="shareVO" resultType="shareVO">
        SELECT
        u.seq,
        u.url
        FROM
        account_tb a
        JOIN url_tb u ON a.id = u.id
        WHERE
        seq = (SELECT MAX(seq) FROM url_tb WHERE id = #{Id})
    </select>
    
  <resultMap type="LoginVO" id="userMap">
    <result column="id" property="userId" />
    <result column="password" property="passwd" />

  </resultMap>
 
<!--     <select id="notMemberInsert" parameterType="notMemberVO">
        INSERT INTO account_tb(mbti, nickname, gender, ani)
        values (#{mbti}, #{nickname}, #{gender}, #{ani})
        
    </select> -->
</mapper>